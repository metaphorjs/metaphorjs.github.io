<!DOCTYPE html>
<html>
<head>
    <title>MetaphorJs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="bower_components/prism/themes/prism.css">
    <style>
        .footer {
            background-color: #f0f0f0;
            padding: 20px 0;
        }
    </style>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">MetaphorJs</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#class">Class system</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Directives <span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#directive-app">app</a></li>
                            <li><a href="#directive-bind">bind, bind-html</a></li>
                            <li><a href="#directive-class">class</a></li>
                            <li><a href="#directive-cmp">cmp, cmp-prop</a></li>
                            <li><a href="#directive-config">config</a></li>
                            <li><a href="#directive-each">each, each-in-store</a></li>
                            <li><a href="#directive-show">show, hide, if</a></li>
                            <li><a href="#directive-ignore">ignore</a></li>
                            <li><a href="#directive-include">include, transclude</a></li>
                            <li><a href="#directive-init">init</a></li>
                            <li><a href="#directive-model">model</a></li>
                            <li><a href="#directive-options">options</a></li>
                            <li><a href="#directive-src">src</a></li>
                            <li><a href="#directive-view">view</a></li>
                            <li><a href="#directive-click">click, dblclick, etc</a></li>
                            <li><a href="#directive-disabled">disabled, selected, etc</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Filters <span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#filter-filter">filter</a></li>
                            <li><a href="#filter-join">join</a></li>
                            <li><a href="#filter-l">l</a></li>
                            <li><a href="#filter-limitTo">limitTo</a></li>
                            <li><a href="#filter-linkify">linkify</a></li>
                            <li><a href="#filter-lowercase">lowercase</a></li>
                            <li><a href="#filter-p">p</a></li>
                            <li><a href="#filter-sortBy">sortBy</a></li>
                            <li><a href="#filter-toArray">toArray</a></li>
                            <li><a href="#filter-split">split</a></li>
                            <li><a href="#filter-ucfirst">ucfirst</a></li>
                            <li><a href="#filter-uppercase">uppercase</a></li>
                        </ul>
                    </li>
                    <li><a href="#components">Components</a></li>
                    <li><a href="#views">Views</a></li>
                    <li><a href="#model">Model</a></li>
                    <li><a href="#building">Building</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#animations">Animations</a></li>
                            <li><a href="#i18n">I18n</a></li>
                            <li><a href="#injection">Dependency Injection</a></li>
                            <li><a href="#recursive">Recursive rendering</a></li>
                            <li><a href="#dialogs">Dialogs</a></li>
                            <li class="divider"></li>
                            <li><a href="#more">And more</a></li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://github.com/kuindji/metaphorjs">Github</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
        </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
        <div class="container">
            <h1>MetaphorJs</h1>
            <p>Javascript app and code framework (v0.3 beta)</p>
        </div>
    </div>

    <div class="container">
        <!-- Example row of columns -->
        <div class="row" id="getting-started">
            <div class="col-md-12">
                <h2>Getting started</h2>
            </div>
            <div class="col-md-6">
                <p>MetaphorJs is an app framework similar to
                    <a href="http://angularjs.org">AngularJs</a> and
                    <a href="http://sencha.com">ExtJs</a>.
                    Also, it is a code framework on top of which (including or excluding
                    the app framework functionality) you can
                    <a href="#building">create your own libraries</a>.
                </p>

                <p class="well">
                    Please note that class and function names found in this documentation may
                    or may not be exposed in global MetaphorJs object - it depends
                    on the <a href="#building">build</a>. The MetaphorJs object itself
                    can also be hidden.
                </p>

                <p>MetaphorJs neither has nor does provide functionality such as jQuery provides.
                It also does not depend on any such library.</p>

                <p>Browser support: IE6+, Firefox, Chrome (desktop/android),
                    Opera, Safari (desktop/iOS), Blackberry, Android native</p>

                <h3>Directives</h3>
                <p>
                    <a href="#directive-app"><code>app</code></a>,
                    <a href="#directive-bind"><code>bind</code>, <code>bind-html</code></a>,
                    <a href="#directive-class"><code>class</code></a>,
                    <a href="#directive-cmp"><code>cmp</code>, <code>cmp-prop</code></a>,
                    <a href="#directive-config"><code>config</code></a>,
                    <a href="#directive-each"><code>each</code>, <code>each-in-store</code></a>,
                    <a href="#directive-show"><code>show</code>, <code>hide</code>, <code>if</code></a>,
                    <a href="#directive-ignore"><code>ignore</code></a>,
                    <a href="#directive-include"><code>include</code>, <code>transclude</code></a>,
                    <a href="#directive-init"><code>init</code></a>,
                    <a href="#directive-model"><code>model</code></a>,
                    <a href="#directive-options"><code>options</code></a>,
                    <a href="#directive-src"><code>src</code></a>,
                    <a href="#directive-view"><code>view</code></a>,
                    <a href="#directive-click"><code>click</code>, <code>dblclick</code>, etc</a>.
                    <a href="#directive-disabled"><code>disabled</code>, <code>selected</code>, etc</a>
                </p>

                <h3>Filters</h3>
                <p>
                    <a href="#filter-filter"><code>filter</code></a>,
                    <a href="#filter-join"><code>join</code></a>,
                    <a href="#filter-l"><code>l</code></a>,
                    <a href="#filter-limitTo"><code>limitTo</code></a>,
                    <a href="#filter-linkify"><code>linkify</code></a>,
                    <a href="#filter-lowercase"><code>lowercase</code></a>,
                    <a href="#filter-p"><code>p</code></a>,
                    <a href="#filter-sortBy"><code>sortBy</code></a>,
                    <a href="#filter-toArray"><code>toArray</code></a>,
                    <a href="#filter-split"><code>split</code></a>,
                    <a href="#filter-ucfirst"><code>ucfirst</code></a>,
                    <a href="#filter-uppercase"><code>uppercase</code></a>
                </p>
            </div>
            <div class="col-md-6">
                <pre><code class="language-markup">&lt;html mjs-app&gt;
&lt;head&gt;
    &lt;script src=&quot;metaphorjs.all.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input mjs-model=&quot;.name&quot;/&gt;
    &lt;p&gt;Hello, {{.name}}!&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                <h4>Demos</h4>
                <ul>
                    <li><a href="../demo/basics.html">Basics</a></li>
                    <li><a href="../demo/tags.html">Tags</a></li>
                    <li><a href="../demo/todo.html">Todo</a></li>
                    <li><a href="../demo/recursive.html">Recursive</a></li>
                    <li><a href="../demo/table-buffered.html">Buffered table</a></li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="class">Class system</h2>
                <p>MetaphorJs exposes a mechanism of creating and extending
                    <a href="https://github.com/kuindji/metaphorjs-class">classes</a>
                    in global or encapsulated
                    <a href="https://github.com/kuindji/metaphorjs-namespace">namespaces</a>.
                </p>
                <p>By default, MetaphorJs provides encapsulated namespace
                    (MetaphorJs.ns)
                    and class system
                    (MetaphorJs.cs)
                    which you can expose during <a href="#building">build phase</a> or later.</p>
                <h3>MetaphorJs.cs</h3>
                <pre><code class="language-javascript">// initialization cycle:
// 1. $constructor (call parent constructor with this.$super())
// 2. mixin's $beforeInit (mixins are not classes, they don't have $super(); '$beforeInit's
//    are called in order mixins are specified)
// 3. plugin's $beforeHostInit (plugins are classes, they their own $super())
// 4. $init (call parent $init with this.$super())
// 5. mixin's $afterInit
// 6. plugin's $afterHostInit

// destroy cycle (call instance.$destroy())
// 1. mixin's $beforeDestroy method
// 2. plugin's $beforeHostDestroy method
// 3. instance's destroy() method
// 4. mixin's $afterDestroy method
// 5. plugin's $destroy method
// the $destroy method will nullify all instance properties and methods.
// if you want to prevent this, return false from your destroy() method.

// define(methodsAndProperties, statics)
MetaphorJs.cs.define({
    $class: "My.Person",
    firstName: null,
    lastName: null,

    $constructor: function(firstName, lastName){
        // if you want to use plugins, this function must set them up
        // (probably take them from config)
        // you can't define plugins in class's definition; this is "run-time" only.
        this.$plugins = [...];

        // call parent constructor
        this.$super();
    },

    // the class itself can't have $beforeInit and $afterInit methods
    // they come from mixins
    $init: function(firstName, lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.$super();
    },
    getName: function() {
        return this.firstName + " " + this.lastName;
    }
});
// define() returns newly created classes,
// so you can avoid using $class names.

var mixin = {
    $beforeInit: function() {
        // will be called before host class initialized
    },
    $afterInit: function() {
        // will be called after host class initialized
    },
    mixinFunc: function() {
    }
};

MetaphorJs.cs.define({
    $class: "My.ExtendedPerson",
    $extends: "My.Person",
    $mixins: [mixin], // or ["MixinName"] where it was added to namespace as mixin.MixinName
    age: null,
    $init: function(firstName, lastName, age) {
        this.$super(firstName, lastName);
        this.age = age;
    },
    getAge: function() {
        return this.age;
    }
});

MetaphorJs.cs.define({
    $class: "PluginClass",
    $init: function(hostObject, hostObjectArguments) {
        // plugin's $init and $constructor receive host object
        // as the first parameter, and
        // host's arguments as the second.
    },
    // called after $beforeInit and before $init
    $beforeHostInit: function() {
        // this function receives
        // the same parameters as host's constructor
    },
    // called after $afterInit
    $afterHostInit: function() {
        // this function receives
        // the same parameters as host's constructor
    }
    // and yes, plugins can have their own plugins :)
});

MetaphorJs.cs.define({
    $class: "PluginHost",
    $constructor: function(cfg) {
        this.$plugins = cfg.plugins;
    }
});

var host = new MetaphorJs.PluginHost({
    plugins: [PluginClass]
});

// you can use $extend shortcut to avoid calling "define()"
// and there is a cs.BaseClass.$extend you can start with.
var ClassWithoutName = MetaphorJs.My.ExtendedPerson.$extend({
    getAge: function() {
        return this.$super() * 10;
    }
});

// you can also extend your own classes:
var PrototypedClass = function() {
    // this will become $constructor
};
PrototypedClass.prototype.someMethod = function(){};

MetaphorJs.cs.define({
    $class: "SomeClass",
    $extends: PrototypedClass,
    $constructor: function() {
        this.$super(); // call PrototypedClass constructor
    }
});

// instantiate with variable number of arguments:
MetaphorJs.My.ExtendedPerson.$instantiate(["John", "Smith", 30]);

var person = MetaphorJs.cs.factory("My.ExtendedPerson", "John", "Smith", 30);
var another = new MetaphorJs.My.ExtendedPerson("Jane", "Smith", 29);
                </code></pre>

                <h3>MetaphorJs.ns</h3>
                <pre><code class="language-javascript">
var ns = new MetaphorJs.lib.Namespace; // global namespace
var cs = new MetaphorJs.lib.Class(ns); // global class system
var encapsulated = {};
var encNs = new MetaphorJs.lib.Namespace(encapsulated); // hidden namespace
var encCs = new MetaphorJs.lib.Class(encNs); // hidden class system

cs.define({
    $class: "My.TestClass"
});
// window.My.TestClass

encCs.define({
    $class: "My.TestClass"
});
// encapsulated.My.TestClass

// in the default namespace you can use both
// "MetaphorJs.Any.Thing" and "Any.Thing" - it is the same.
// Your class will be available as MetaphorJs.Any.Thing
                </code></pre>

                <p></p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="directives">Directives</h2>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-app">mjs-app</h3>
                <p><code>mjs-app</code> directive instantiates an App class (MetaphorJs.cmp.App by default).</p>
                <p>You can provide your own class name as a value of this attribute. Your class
                    must extend MetaphorJs.cmp.App</p>
                <div class="col-md-6">
                    <pre><code class="language-javascript">MetaphorJs.define({
    $class: "My.App",
    $extends: "MetaphorJs.cmp.App",
    initApp: function() {
        this.value('someDependency', someValue);
        this.onAvailable("componentId").done(function(cmp){
            // do stuff when component is available
        });
    }
});</code></pre>
                </div>
                <div class="col-md-6">
                    <pre><code class="language-markup">&lt;html mjs-app=&quot;My.App&quot;&gt;
&lt;/html&gt;</code></pre>
                </div>

            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>You can also instantiate an app without <code>mjs-app</code> directive any time you want.</p>
                <pre><code class="language-javascript">MetaphorJs.initApp(elem, stringClass, objectData, autorun).done(function(app){
    // if autorun = false
    // so something with the app: provide values and services, subscribe to events, etc
    app.run();
});
// by default autorun = true </code></pre>
            </div>
        </div>
        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-bind">mjs-bind, mjs-bind-html, inline and attribute binding</h3>
                <p><code>mjs-bind</code> and <code>mjs-bind-html</code> directives replace element's content
                    with variable's value.</p>
                <pre><code class="language-markup">&lt;div mjs-init=&quot;.a = 1&quot;&gt;
    &lt;p mjs-bind=&quot;.a&quot;&gt;&lt;/p&gt;
&lt;/div&gt;</code></pre>
                <p>If you use <code>mjs-bind</code> on a input/textarea/select/checkbox/radio field,
                field's value will be changed. This is a one-way binding, so changing field's value
                manually will not change the variable.</p>
                <p>Inline binding works within any text or attribute (except special <code>mjs-</code> attributes):</p>
                <pre><code class="language-markup">&lt;a href=&quot;{{.href}}&quot; title=&quot;{{.title}}&quot;&gt;{{.text}}&lt;/a&gt;
&lt;p&gt;
    You can insert variables {{.a}} {{.b}} {{.a + .b}} wherever you want.
&lt;/p&gt;</code></pre>
                <p>Use <code>mjs-bind-html</code> if you want to insert html. Otherwise, html tags will be escaped.</p>
                <!--<h4>Object.observe()</h4>
                <p>MetaphorJs supports <code>Object.observe()</code> method although it can't replace
                normal digest cycle since you can use any kind of expression including functions.
                So, digest cycle stays in place and you occasionally have to call scope.$check(), but
                if native version of Object.observe is present (MetaphorJs ignores polyfills), all
                non-expression checks will be skipped, making digest cycle potentially faster.</p>
                <p>Make sure to initialize scope variable before data binding happens, otherwise
                it will be treated as an expression.</p>
                <p>Also, observe() will not be used if output pipes are present since they can potentially return
                different values given the same input.</p>-->
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-class">mjs-class</h3>
                <p>
                    This attribute toggles element's class. There are two ways of providing class names:
                </p>
                <ol>
                    <li><code>mjs-class=".variableName"</code> -
                        this way the class will change as soon as variable changes.</li>
                    <li><code>mjs-class="{class1: .var1, class2: .var2}"</code> - this will toggle classes
                    based on how variables resolve to true/false state.</li>
                </ol>

            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-cmp">mjs-cmp, mjs-cmp-prop</h3>
                <p>
                    See <a href="#components">Components</a> section.
                </p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-config">mjs-config</h3>
                <p><code>mjs-config="{property: 'value'}"</code> allows you to provide
                    config variables to some components. Although the faster way of doing this is by using
                    <code>data-</code> attributes: <code>data-property="value".</code>
                </p>
                <p>This will come handy when configuring <code>mjs-each</code></p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-each">mjs-each, mjs-each-in-store</h3>
                <p><code>mjs-each</code> directive generates repeated content based on array of values.
                    <code>mjs-each-in-store</code> does the same but with data stores (see <a href="#model">Model</a>).
                </p>
                <pre><code class="language-markup">&lt;ul mjs-init=&quot;.list = ['Jane', 'John', 'Jack']&quot;&gt;
    &lt;li mjs-each=&quot;name in .list&quot;&gt;{{.name}}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
                <p>You can use filters such as <code>filter</code>, <code>sortBy</code>, <code>limitTo</code>:
                <code>mjs-each="name in .list | sortBy:$ | limitTo:1"</code></p>
                <p>Config options: (via <code>mjs-config</code> or <code>data-</code>)</p>
                <ul>
                    <li><code>trackBy</code>: identify items by this property ($ - for item itself)</li>
                    <li><code>buffered</code>: render only visible part of the list</li>
                    <li><code>itemSize</code>: in or for buffering to work you must provide item width or height</li>
                    <li><code>itemsOffsite</code>: how many items to render outside visible area</li>
                    <li><code>stub</code>: tag name of top and bottom stubs (default: div)</li>
                    <li><code>horizontal</code>: what type of scrolling will be used (default: false)</li>
                    <li><code>animateMove</code>: animate items changing place
                        (applies translateX/Y properties during mjs-move stage.
                        See <a href="#animations">Animations</a>)</li>
                    <li><code>id</code>: make this component available via $app.onAvailable("...")</li>
                    <li><code>pullNext</code>: (each-in-store) automatically pull next page from remote source</li>
                    <li>
                        <code>observable</code>: make this component observable (<code>list.on("event", fn)</code>).
                        Events:
                        <ul>
                            <li>"render": list has been rendered for the first time</li>
                            <li>"change": list has been changed, new elements appeared, old elements removed</li>
                            <li>"bufferchange": scroll buffer has changed</li>
                            <li>"bufferupdate": elements were updated based on new scroll buffer</li>
                            <li>"pull": (mjs-each-in-store) new data was pulled from remote source</li>
                            <li>"destroy": list was destroyed</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-show">mjs-show, mjs-hide, mjs-if</h3>
                <p>These three show or hide content based on variable value.</p>
                <ul>
                    <li><code>mjs-show=".var"</code>: show element if .var is true (applies display="none")</li>
                    <li><code>mjs-hide=".var"</code>: hide element if .var is true (applies display="none")</li>
                    <li><code>mjs-if=".var"</code>: show element if .var is true (removes element from dom)</li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-ignore">mjs-ignore</h3>
                <p>Ignore given element and all its children</p>
            </div>
        </div>


        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-include">mjs-include, mjs-transclude</h3>
                <p>Replaces element's content with a template.
                    (Original content will be available via <code>mjs-transclude</code>)</p>
                <div class="col-md-6">
                    <h4>Defining templates</h4>
                    <pre><code class="language-markup">&lt;script type=&quot;text/mjs-template&quot; id=&quot;tpl1&quot;&gt;
    &lt;p&gt;Template content&lt;/p&gt;
&lt;/script&gt;
&lt;mjs-template id=&quot;tpl2&quot;&gt;
    &lt;p&gt;Template content&lt;/p&gt;
    &lt;div mjs-transclude&gt;&lt;/div&gt;
&lt;/mjs-template&gt;
&lt;template id=&quot;tpl3&quot;&gt;
    &lt;p&gt;Template content&lt;/p&gt;
&lt;/template&gt;</code></pre>
                </div>
                <div class="col-md-6">
                    <h4>Using templates</h4>
                    <pre><code class="language-markup">&lt;div mjs-init=&quot;.tpl = 'tpl1'&quot;&gt;
    &lt;div mjs-include=&quot;.tpl&quot;&gt;&lt;/div&gt;
    &lt;div mjs-include=&quot;'tpl2'&quot;&gt;
        &lt;p&gt;Transcluded text&lt;/p&gt;
    &lt;/div&gt;
    &lt;mjs-include src=&quot;.tpl&quot;&gt;&lt;/mjs-include&gt;
&lt;/div&gt;</code></pre>
                </div>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-init">mjs-init</h3>
                <p>Executes an expression agains current scope. You can initialize variables this way</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-model">mjs-model</h3>
                <p><code>mjs-model</code> applies to input fields and
                    is similar to <code>mjs-bind</code> except that it works in both directions.</p>
                <pre><code class="language-markup">&lt;input mjs-model=&quot;.var&quot;/&gt;</code></pre>
                <p>The directive is configurable two options:</p>
                <ul>
                    <li><code>type</code>: data type (number|date|bool); (for now only number is recognized)</li>
                    <li>
                        <code>binding</code>:
                        <ul>
                            <li>"both" or none - two-way data binding</li>
                            <li>"input" - one way from input to scope</li>
                            <li>"scope" - one way from scope to input (like <code>mjs-bind</code>)</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-options">mjs-options</h3>
                <p>
                    Renders option list from array of values. The format is either:
                    <code>mjs-options=".varName"</code> or <code>mjs-options="{ ... } in .varName"</code> where
                    { ... } is item config (default item config is {name: .item, value: .$index}.<br>
                    Config recognizes the following keys:
                </p>
                <ul>
                    <li><code>name</code>: (string) option name</li>
                    <li><code>value</code>: (string) option value</li>
                    <li><code>disabled</code>: (bool) is option disabled</li>
                    <li><code>group</code>: (string) option group</li>
                    <li><code>disabledGroup</code>: (bool) is option group disabled</li>
                </ul>
                <pre><code class="language-markup">&lt;select mjs-init=&quot;.list=['Jane', 'John', 'Jack']&quot; mjs-options=&quot;{name: .item, value: .$index} in .list&quot;&gt;
&lt;/select&gt;</code></pre>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-src">mjs-src</h3>
                <p>Sets and changes image's src attribute. Configurable with two options:</p>
                <ul>
                    <li><code>deferred</code>: only load images when they are visible on screen</li>
                    <li><code>noPreload</code>: do not use image preloader</li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-view">mjs-view</h3>
                <p>See <a href="#views">Views</a></p>
            </div>
        </div>


        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-click">mjs-click, mjs-dblclick, etc</h3>
                <p>Executes an expression against current scope on dom event.
                    The full list of event directives:
                    <code>mjs-click</code>,
                    <code>mjs-dblclick</code>,
                    <code>mjs-mousedown</code>,
                    <code>mjs-mouseup</code>,
                    <code>mjs-mouseover</code>,
                    <code>mjs-mouseout</code>,
                    <code>mjs-mousemove</code>,
                    <code>mjs-keydown</code>,
                    <code>mjs-keyup</code>,
                    <code>mjs-keypress</code>,
                    <code>mjs-submit</code>,
                    <code>mjs-focus</code>,
                    <code>mjs-blur</code>,
                    <code>mjs-copy</code>,
                    <code>mjs-cut</code>,
                    <code>mjs-paste</code>,
                    <code>mjs-enter</code>
                </p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="directive-disabled">mjs-disabled, mjs-selected, etc</h3>
                <p>These boolean directives add or remove respective attribute based on scope value:
                    <code>mjs-selected</code>,
                    <code>mjs-checked</code>,
                    <code>mjs-disabled</code>,
                    <code>mjs-readonly</code>,
                    <code>mjs-open</code>,
                    <code>mjs-required</code>.
                </p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="filters">Filters</h2>
                <p>There are two types of filters: input filters and output filters. Input filters work in
                conjunction with <code>mjs-model</code>, they process user input before applying to the scope.</p>
                <pre><code class="language-markup">&lt;p mjs-bind=&quot;{{.var | filterName:filterParam&quot;&gt;&lt;/p&gt;
&lt;p&gt;{{.var | filterName:filterParam}}&lt;/p&gt;
&lt;input mjs-model=&quot;filterName:filterParam &gt;&gt; .var&quot;/&gt;</code></pre>
                <p>It is possible to use both input and output filters in the same expression.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-filter">| filter:by:opt</h3>
                <p>Filters array</p>
                <ul>
                    <li>
                        <code>by</code>: object|string|function|regexp (via plain string or expression)
                        <ul>
                            <li><code>object</code>: {key: checker} compare item values to these values.<br>
                                If key = '$', it means "any item key".<br>
                                Checker can be a function: function(itemKeyValue, opt) -> boolean,
                                or a string or a regexp.</li>
                            <li><code>string</code>: same as {$: string}</li>
                            <li><code>function</code>: same as {$: function}</li>
                            <li><code>regexp</code>: same as {$: regexp}</li>
                        </ul>
                    </li>
                    <li>
                        <code>opt</code>: string|bool (via plain string or expression)
                        <ul>
                            <li>"strict": === check</li>
                            <li>true | null: item value contains "by" value</li>
                            <li>false: item value does not contain "by" value</li>
                        </ul>
                    </li>
                </ul>
                <pre><code class="language-markup">&lt;ul mjs-init=&quot;.list = ['Jane', 'John', 'Jack']&quot;&gt;
    &lt;li mjs-each=&quot;name in .list | filter:'Ja'&quot;&gt;{{.name}}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-sortBy">| sortBy:field:direction</h3>
                <p>Sorts array by a given field in a given direction</p>
                <pre><code class="language-markup">&lt;ul mjs-init=&quot;.list = ['Jane', 'John', 'Jack']&quot;&gt;
&lt;li mjs-each=&quot;name in .list | sortBy:'$':'desc'&quot;&gt;{{.name}}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
            </div>
        </div>


        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-join">| join:separator</h3>
                <p>Transforms array into a string</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-limitTo">| limitTo:limit >></h3>
                <p>Limits arrays and strings to a given number of items/chars.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-linkify">| linkify</h3>
                <p>Transforms plain text links into html links.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-lowercase">| lowercase >></h3>
                <p>value.toLowerCase()</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-uppercase">| uppercase >></h3>
                <p>value.toUpperCase()</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-ucfirst">| ucfirst >></h3>
                <p>Upper case first char</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-toArray">| toArray >></h3>
                <p>Any non-array value will become [value]</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-split">| split:separator:limit >></h3>
                <p>Split given string value</p>
                <pre><code class="language-markup">&lt;textarea mjs-model='split:&quot;\n&quot; &gt;&gt; .list'&gt;&lt;/textarea&gt;</code></pre>
            </div>
        </div>


        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-l">| l</h3>
                <p>See <a href="#i18n">I18n</a></p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h3 id="filter-p">| p</h3>
                <p>See <a href="#i18n">I18n</a></p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="components">Components</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <pre><code class="language-javascript">MetaphorJs.cs.define({
    $class: "MyComponent",
    $extends: "MetaphorJs.cmp.Component",
    templateUrl: "/path/to/some/template.html", // or
    template: "templateId", // or
    template: ".varName", // or
    template: '&lt;div&gt;any html&lt;/div&gt;', // or none at all
    as: "ctrl",
    id: "myCmp",
    initComponent: function(scope, node) {
        console.log("initialized");
    },
    someAction: function() {
        console.log("action!");
        this.trigger("action", this);
        this.scope.$app.trigger("someEvent", this);
    }
});</code></pre>
            </div>
            <div class="col-md-6">
                <pre><code class="language-markup">&lt;div id=&quot;myCmp&quot; mjs-cmp=&quot;MyComponent&quot;&gt;
    &lt;a href=&quot;#&quot; mjs-click=&quot;.ctrl.someAction(.$event)&quot;&gt;Click me&lt;/a&gt;
&lt;/div&gt;
&lt;div mjs-cmp=&quot;MyComponent as ctrl&quot;&gt;&lt;/div&gt;</code></pre>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>Components may have their <code>id</code> set via config or as element's id property.
                When component have an id, you can use <code>scope.$app.onAvailable("myCmp").done(function(cmp){})</code>.
                </p>
                <p>Any data specified in <code>mjs-config</code> or as <code>data-*</code> will be automatically
                applied to component: so that if you set <code>data-my-prop="1"</code> then inside your component
                it will be <code>this.myProp</code>.</p>
                <p>If any of the child elements of the component has <code>mjs-cmp-prop="whatever"</code> then
                this element will be available inside component as <code>this.whatever</code>. Although,
                this will not happen on initialization time but after component is rendered. You may need
                to override <code>afterRender: function(){}</code> to initialize things on child elements.</p>
                <p>Components are <a href="https://github.com/kuindji/metaphorjs-observable">observable</a> so
                you can subscribe to component events: <code>cmp.on("action", function(cmp){});</code>,
                    <code>cmp.on("destroy", function(cmp){});</code>. This
                makes communication between components easy.</p>
                <p>In fact, the $app object is also observable: <code>scope.$app.on("someEvent", function(){});</code></p>
                <p>You can create components dynamically:</p>
                <pre><code class="language-javascript">var cmp = new MetaphorJs.MyComponent({
    template: '&lt;div&gt;&lt;/div&gt;', // you can override any option
    renderTo: document.getElementById("someTarget"),
    callback: {
        render: function() {
            console.log("rendered!");
        }
    }
});</code></pre>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>Apart from <a href="#injection">dependency injection</a> component may also have its own resolve
                functions:</p>
                <pre><code class="language-javascript">MetaphorJs.define({
    $class: "MyComponent",
    $extends: "MetaphorJs.cmp.Component"
    // instance properties
}, {
    // static properties
    resolve: {
        propertyName: function() {
            // return value or a promise
        },
        anotherProperty: ['$node', '$parentCmp', '$scope', function(node, parentCmp, scope){}]
    },
    template: '...',
    templateUrl: '...'
});</code></pre>
                <p>If <code>template</code> is specified in static properties it will be resolved before
                component initialization. <code>propertyName</code> and <code>anotherProperty</code> will be
                available as <code>this.propertyName</code> etc.</p>
                <p>If component has some dependencies, you can use <code>resolveComponent</code> function.</p>
                <pre><code class="language-javascript">resolveComponent("MyComponent", {template: ".varName", renderTo: ...}, scope).done(function(cmp){
// do something with cmp
});</code></pre>
                <p>This will resolve all static "resolve" properties and dependencies.
                    This actually works with any class including views and app itself.</p>
                <p>If you add <code>mjs-cloak</code> attribute to the component's element,
                    it will be hidden until component is resolved. If attribute's value is not empty,
                    it will be added as a class name, otherwise - <code>style.visibility = "hidden"</code>.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="views">Views</h2>
                <p>
                    View is a container that switches Components/Templates based on current url or a scope variable.
                    When you create your own view, it must extend <code>MetaphorJs.cmp.View</code> class.
                </p>
                <p><b>Url view:</b></p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <pre><code class="language-javascript">MetaphorJs.define({
    $class: "MyUrlView",
    $extends: "MetaphorJs.cmp.View",
    route: [
        {
            template: 'test-template', // no component here
            "default": true
        },
        {
            reg: /^\/1$/, // regular expression to identify component by.
                            // these are checked not against location.href
                            // but against MetaphorJs.history.currentUrl()
                            // which is basically anything after host:port.
            cmp: "Test.MyComponent"
        },
        {
            reg: /^\/2\/(\d+)$/,
            params: ["param"], // all matches starting from 1 can be identified as params
                                // starting from index 0.
                                // params will be available in the component
                                // as this.paramName
            cmp: "Test.MyComponent2"
        }
    ]
});</code></pre>
            </div>
            <div class="col-md-6">
                <pre><code class="language-markup">&lt;div mjs-view=&quot;MyUrlView&quot;&gt;&lt;/div&gt;</code></pre>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p><b>Cmp view:</b></p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <pre><code class="language-javascript">MetaphorJs.cs.define({
    $class: "MyCmpView",
    $extends: "MetaphorJs.cmp.View",
    cmp: ".varName",
    defaultCmp: "SomeComponent" // optional
});</code></pre>
            </div>
            <div class="col-md-6">
                <pre><code class="language-markup">&lt;div mjs-view=&quot;MyCmpView&quot;&gt;&lt;/div&gt;</code></pre>
                <p>or</p>
                <pre><code class="language-markup">&lt;div mjs-view data-cmp=&quot;.varName&quot; data-default-cmp=&quot;SomeComponent&quot;&gt;&lt;/div&gt;</code></pre>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>You can create as many views as you like.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="injection">Dependency injection</h2>
                <p>
                    MetaphorJs supports two formats of declaring dependencies:
                    <code>['dep1', 'dep2', ..., function(){}]</code> and
                    <code>ClassName.inject = ['dep1', 'dep2', ...]</code>.
                </p>
                <p>Directives, Components and Views are automatically passed through
                <code>scope.$app.inject(injectable, context, currentValues, callArgs)</code>
                    function. It may or may not return promise, depending on whether there were
                    dependencies.</p>
                <p>You can provide dependencies on app's initialization time or later.</p>
                <pre><code class="language-javascript">MetaphorJs.cs.define({
    $class: "MyApp",
    $extends: "MetaphorJs.cmp.App",
    initApp: function() {
        this.value("name", someValue);
    }
});
// or
scope.$app.value("name", someValue);</code></pre>
                <ul>
                    <li><code>$app.value(name, value)</code>: value can be anything</li>
                    <li><code>$app.constant(name, value)</code>: value can be anything, but you can use name only once</li>
                    <li><code>$app.factory(name, fn, context, singleton)</code>: a function
                        called in given context (<code>fn.apply(context)</code>) which returns some value.
                        If singleton = true, the function will be called only once. Can have its own dependencies.</li>
                    <li><code>$app.service(name, classConstructor, singleton)</code>:
                        returns <code>new classConstructor</code>.  Can have its own dependencies.</li>
                    <li><code>$app.provider(name, fn)</code>: name without "Provider" at the end. fn returns an object
                    with <code>$get: function(){}</code>. This will turn into $app.factory(name, obj.$get, obj).
                    Can have its own dependencies.</li>
                    <li><code>$app.resolve(name, currentValues)</code> -> returns either a value or a promise.</li>
                </ul>
                <p>Default dependencies available in every app:</p>
                <ul>
                    <li><code>$app</code> - the app itself</li>
                    <li><code>$lang</code> - See <a href="#i18n">I18n</a></li>
                    <li><code>$rootScope</code> - app's root scope</li>
                </ul>
                <p>Default dependencies available when resolving directives (including <code>mjs-cmp</code>):</p>
                <ul>
                    <li><code>$parentCmp</code> - parent component</li>
                    <li><code>$scope</code> - current scope</li>
                    <li><code>$node</code> - current element</li>
                    <li><code>$config</code> - in <code>mjs-cmp</code></li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="templates">Templates</h2>
                <p>See <a href="#directive-include">mjs-include</a></p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="model">Model</h2>
                <p>MetaphorJs data model consists of three classes:
                    <code>Model</code>, <code>Record</code> and <code>Store</code>
                </p>
                <h4>Model</h4>
                <p>The Model class keeps information about how to fetch and configure records and stores.</p>
                <pre><code class="language-javascript">MetaphorJs.define({
    $class: "MyModel",
    $extends: "MetaphorJs.model.Model",
    type: "MetaphorJs.model.Record", // or your class; optional
    fields: {
        name: {
            // store and restore params
        }
    },
    store: {
        // store config
        load: { // how to load records
            url: "...", // can use this string directly: load: "..."
            // url can also be a function which returns data or promise
            method: "GET" // optional
            // more ajax params can be specified here
        },
        save: {...}, // how to save records in bulk
        "delete": {...}, // how to delete records in bulk

        // these properties can also be used inside load/save/delete
        id: "idProp", // id property name (optional)
        data: "dataProp", // data property name (array of records) (optional)
        success: "successProp", // check this field for success (optional)
        extra: {} // send these extra parameters
    },
    record: {
        // record config
        load: {...}, // how to load record
        save: {...}, // how to save record
        "delete": {...} // how to delete record

        // pluse id, data, success and extra
    }
});</code></pre>
                <h4>Store</h4>
                <p><code>MetaphorJs.model.Store</code> can be local or "remote".</p>
                <pre><code class="language-javascript">var store = new MetaphorJs.model.Store({
    model: { // object|model class name|model instance
        // model config
    }
});
// or
var store = new MetaphorJs.model.Store(url, optionalConfig);</code></pre>
                <p>Store instance has following methods (among others):
                    <code>load(),</code>
                    <code>save(),</code>
                    <code>deleteById(),</code>
                    <code>deleteAt(),</code>
                    <code>delete(),</code>
                    <code>deleteRecords(),</code>
                    <code>loadPrevPage(),</code>
                    <code>loadNextPage(),</code>
                    <code>addPrevPage(),</code>
                    <code>addNextPage(),</code>
                    <code>shift(),</code>
                    <code>unshift(),</code>
                    <code>pop(),</code>
                    <code>addMany(),</code>
                    <code>add(),</code>
                    <code>removeAt(),</code>
                    <code>removeId(),</code>
                    <code>remove(),</code>
                    <code>insert(),</code>
                    <code>insertMany(),</code>
                    <code>replace(),</code>
                    <code>contains(),</code>
                    <code>containsId(),</code>
                    <code>getAt(),</code>
                    <code>getById(),</code>
                    <code>indexOf(),</code>
                    <code>indexOfId(),</code>
                    <code>each(),</code>
                    <code>eachId(),</code>
                    <code>collect(),</code>
                    <code>first(),</code>
                    <code>last(),</code>
                    <code>getRange(),</code>
                    <code>findBy(),</code>
                    <code>findIndexBy(),</code>
                    <code>find(),</code>
                    <code>findExact(),</code>
                    <code>findBySet(),</code>
                    <code>filter(),</code>
                    <code>clearFilter(),</code>
                    <code>sortBy(),</code>
                    <code>clearSorting()</code>.
                </p>
                <p>The <code>mjs-each-in-store</code> directive accepts stores and works with it as
                    <code>mjs-each</code> works with arrays.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="animations">Animations</h2>
                <p>MetaphorJs supports css and javascript animations.</p>
                <p>Apart from using <code>MetaphorJs.animate()</code> directly, you add <code>mjs-animate</code>
                attribute to the elements you want animated. This works in conjuction with other directives:</p>
                <ul>
                    <li><code>show</code>, <code>hide</code> - used by
                        <code>mjs-show</code>, <code>mjs-hide</code>
                    </li>
                    <li><code>enter</code>, <code>leave</code> - used by
                        <code>mjs-if</code>,
                        <code>mjs-each</code>, <code>mjs-each-in-store</code>,
                        <code>mjs-include</code>, <code>mjs-cmp</code>, <code>mjs-view</code>.
                    </li>
                    <li><code>move</code> - used by <code>mjs-each</code>, <code>mjs-each-in-store</code>.</li>
                </ul>
                <p>The animation works by adding respective classes to the element</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <pre><code class="language-css">#elem.mjs-show, #elem.mjs-hide {
    -webkit-transition:  opacity 0.4s;
    -moz-transition:  opacity 0.4s;
    -o-transition:   opacity 0.4s;
    transition:  opacity 0.4s;
}

#elem.mjs-show {
    opacity: 0;
}
#elem.mjs-show-active {
    opacity: 1;
}

#elem.mjs-hide {
    opacity: 1;
}
#elem.mjs-hide-active {
    opacity: 0;
}</code></pre>
            </div>
            <div class="col-md-6">
                <pre><code class="language-markup">&lt;div id=&quot;elem&quot; mjs-show=&quot;.var&quot; mjs-animate&gt;&lt;/div&gt;</code></pre>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>One special case is <code>mjs-class</code> directive.
                    If you were to use <code>mjs-class=".varName"</code> and then <code>.varName = 'className';</code>,
                    then following classes will be used in animation:
                    <code>className-add</code> and <code>className-add-active</code> when class is being added, and
                    <code>className-remove</code> and <code>className-remove-active</code> otherwise.
                </p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="recursive">Recursive rendering</h2>
                <p>Recursive rendering happens when bound value contains more bindings.
                For instance: </p>
                <pre><code class="language-markup">&lt;p mjs-init=&quot;.a = 1; .text = 'aaa {{.a}} bbb'&quot; mjs-recursive mjs-bind=&quot;.text&quot;&gt;&lt;/p&gt;</code></pre>
                <p>This behaviour is not enabled by default. You must add <code>mjs-recursive</code> attribute
                to enable it.</p>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="i18n">I18n</h2>
                <p>App's <code>lang</code> property allows you to load a map of texts for using in templates.</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <pre><code class="language-javascript">MetaphorJs.cs.define({
    $class: "MyApp",
    $extends: "MetaphorJs.cmp.App",
    initApp: function() {
        this.lang.setLocale("en");
        this.lang.load(this.langMap);
        delete this.langMap;
    }
}, {
    resolve: {
        langMap: function() {
            return MetaphorJs.ajax("lang.json");
        }
    }
});</code></pre>
            </div>
            <div class="col-md-6">
                <pre><code class="language-javascript">// data.json
{
    "key1": "some text here",
    "key2": "{[key1]} + more text",
    "cat": ["cat", "cats"]
}</code></pre>
                <pre><code class="language-markup">&lt;div mjs-init=&quot;.cnt = 1&quot;&gt;
    &lt;!-- lang keys have their own special format --&gt;
    &lt;p mjs-recursive&gt;{[key2]}&lt;/p&gt;
    &lt;!-- it is essencially the same as --&gt;
    &lt;p mjs-recursive&gt;{{'key2' | l}};&lt;/p&gt;
    &lt;!-- {[]} also supports filters; one of them is p - plural --&gt;
    &lt;p&gt;{{.cnt}} {[cat | p:.cnt]}&lt;/p&gt;
    &lt;!-- plural keys are arrays with word forms starting from single form --&gt;
&lt;/div&gt;</code></pre>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="dialogs">Dialogs</h2>
                <p>MetaphorJs's <a href="https://github.com/kuindji/metaphorjs-dialog">Dialog</a> library
                offers lots of functionality regarding anything that should be shown and hidden such
                as tooltips, dialog windows, modal dialogs, etc. See
                    <a href="http://kuindji.com/js/dialog/demo/index.html">demo</a> page for examples and
                code samples.</p>
                <p>There is also <code>MetaphorJs.cmp.Dialog</code> class tying dialogs to normal components.</p>
                <pre><code class="language-javascript">var dialog = new MetaphorJs.cmp.Dialog({
    scope: currentScope,
    dialogCfg: {
        cls: {
            dialog: "dialog"
        },
        position: "wc",
        show: {
            animate: true
        },
        hide: {
            destroy: true
        }
    },
    as: "dlg",
    template: '&lt;p&gt;This is a dialog. &lt;a href=&quot;#&quot; mjs-click=&quot;.dlg.hide()&quot;&gt;close&lt;/a&gt;&lt;/p&gt;'
});
dialog.show();</code></pre>
                <p>Using the library to show custom tooltips:</p>
                <pre><code class="language-javascript">var tooltip = new MetaphorJs.lib.Dialog({
    target: "a[data-tooltip]",
    content: {
        attr: "data-tooltip"
    },
    show: "mouseover",
    hide: "mouseout",
    position: {
        type: "r",
        offsetX: 5
    },
    cls: "help"
});</code></pre>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="building">Building on top of MetaphorJs</h2>
                <p>MetaphorJs consists of several repositories. It is written in nodejs style,
                each file requiring its dependencies via
                    <code>var dep = require("path/to/dep")</code>. There is a lot of
                functions defined each in its own file. At this point the code does not work in browser.
                In order for that code to work in a browser it must be built. Thats when
                <a href="https://github.com/kuindji/metaphorjs-build">Builder</a> comes in. It
                parses all <code>require</code> statements, puts files in the right order and converts
                all the modules into <code>var dep = something</code>. Builder takes its instructions
                from <code>metaphorjs.json</code> file. You can setup a task runner such as gulp or grunt to
                watch over changes in files and rebuild MetaphorJs on every change. It is quite fast.
                Personally, I use phpStorm's File Watcher. </p>
                <p>MetaphorJs Build can build a nodejs module, amd module, encapsulated module and any of that
                with MetaphorJs exposed to globals and any function or class exposed as MetaphorJs.xyz.
                Generally, in development you would probably want to have all things exposed and on production
                all encapsulated.</p>
                <p>Until the documentation is ready, you can check out <code>metaphorjs.json</code> files in
                all MetaphorJs repositories to learn all the options. Here is a small example though:</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <p>File structure</p>
                <pre>
/metaphorjs
    /src
        ...
/myproject
    /dist
    /src
        /func
            /myFunc.js
        /myClass.js
    /metaphorjs.json</pre>
                <p>metaphorjs.json</p>
                <pre><code class="language-javascript">{
    "build": {
        "test": {
            "auto": true,
            "wrap": true,
            "global": true,
            "target": "dist/build.js",
            "files": [
                "../metaphorjs/src/MetaphorJs.js",
                "./src/*"
            ],
            "expose": [
                "myFunc"
            ]
        }
    }
}</code></pre>
            </div>
            <div class="col-md-4">
                <p>myFunc.js</p>
                <pre><code class="language-javascript">module.exports = function() {
    // do some stuff
};</code></pre>
                <p>myClass.js</p>
                <pre><code class="language-javascript">var myFunc = require("./func/myFunc.js"),
    trim = require("../../metaphorjs/src/func/trim.js");

var MyClass = function() {
};

MyClass.prototype = {
    doStuff: function() {
        return trim(myFunc());
    }
};

module.exports = MyClass;</code></pre>
            </div>
            <div class="col-md-4">
                <p>Result:</p>
                <pre><code class="language-javascript">(function(){
    "use strict";

    var MetaphorJs = {};

    var myFunc = function(){
        // do some stuff
    };

    var trim = function(){...}; // code from Metaphor

    var MyClass = function() {
    };

    MyClass.prototype = {
        doStuff: function() {
            return trim(myFunc());
        }
    };

    window['MetaphorJs'] = MetaphorJs;
    MetaphorJs['myFunc'] = myFunc;
}());</code></pre>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <p>Having one function in one file serves several purposes:</p>
                <ol>
                    <li>It makes testing easier. You write tests requiring one single function.</li>
                    <li>It reduces final file size. You don't need to include a whole library just because
                    you want a couple of functions from it. </li>
                    <li>It makes collaborative work easier.</li>
                </ol>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">
                <h2 id="more">More</h2>
                <p>
                    <a href="https://github.com/kuindji/metaphorjs-ajax">ajax</a>,
                    <a href="https://github.com/kuindji/metaphorjs-history">pushState</a>,
                    <a href="https://github.com/kuindji/metaphorjs-observable">Observable</a>,
                    <a href="https://github.com/kuindji/metaphorjs-promise">Promise</a>,
                    <a href="https://github.com/kuindji/metaphorjs-select">select()</a>,
                    <a href="https://github.com/kuindji/metaphorjs-validator">Validator</a>,
                    <a href="https://github.com/kuindji/metaphorjs-watchable">Watchable</a>.
                </p>
            </div>
        </div>


    </div> <!-- /container -->
    <div class="footer">
        <div class="container">
            <p>MetaphorJs (c) 2014. kuindji at gmail</p>
        </div>
    </div>

    <script src="bower_components/prism/prism.js"></script>
    <script src="bower_components/prism/components/prism-markup.js"></script>
    <script src="bower_components/prism/components/prism-javascript.js"></script>
    <script src="bower_components/prism/components/prism-css.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>